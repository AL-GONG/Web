"use strict";(self.webpackChunkalgong=self.webpackChunkalgong||[]).push([[879],{47360:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(71742),i=t(98545),u=t(28054),s=t(93713),o=t(64387),a=t(68096),c=t(58406),l=t(6664),d=t(41450),h=t(80184);function v(e){var n=e.value,t=e.isMine,r=e.codeParser,i=e.language,u=e.handleChange,s=e.handleSelectChange;return(0,h.jsxs)("div",{children:[(0,h.jsx)(a.Z,{sx:{m:1,minWidth:70},size:"small",children:(0,h.jsxs)(c.Z,{value:i,onChange:s,sx:{height:40},children:[(0,h.jsx)(o.Z,{value:"cpp",children:"C++"}),(0,h.jsx)(o.Z,{value:"java",children:"Java"}),(0,h.jsx)(o.Z,{value:"javascript",children:"JavaScript"}),(0,h.jsx)(o.Z,{value:"kotlin",children:"Kotlin"}),(0,h.jsx)(o.Z,{value:"python",children:"Python"}),(0,h.jsx)(o.Z,{value:"swift",children:"Swift"}),(0,h.jsx)(o.Z,{value:"typeScript",children:"TypeScript"})]})}),(0,h.jsx)(l.ZP,{value:n,onChange:u,theme:"dark",extensions:[d.il.define(r)],readOnly:!t,onFocus:function(e){return!t&&e.target.blur()}})]})}var f=function(e){switch(e){case"cpp":default:return r.N;case"java":return r.Cb;case"javascript":return i.eJ;case"kotlin":return r.j7;case"python":return u.Vs;case"swift":return s.v;case"typescript":return i.NN}};function p(e){var n=e.value,t=e.isMine,r=e.language,i=e.handleChange,u=e.handleSelect;return(0,h.jsx)(v,{value:n,isMine:t,handleChange:i,codeParser:f(r),language:r,handleSelectChange:function(e){u(e.target.value)}})}},19683:function(e,n,t){t.r(n),t.d(n,{default:function(){return H}});var r=t(16871),i=t(53767),u=t(93433),s=t(29439),o=t(93044),a=t(99285),c=t(72791),l=t(87968),d=t(41956),h=t(15776),v=t(47408),f=t(7416),p=t(21598),Z=t(50148),w=t(80184);function x(e){var n=e.handleSubmit,t=(0,c.useState)(""),r=(0,s.Z)(t,2),u=r[0],v=r[1];return(0,w.jsxs)(i.Z,{direction:"row",spacing:3,children:[(0,w.jsx)(o.Z,{sx:{p:3,ml:2,mt:1},children:(0,w.jsx)(h.Z,{fontSize:"medium"})}),(0,w.jsxs)(d.Z,{width:"100%",children:[(0,w.jsx)(a.ZP,{value:u,onChange:v,preview:"edit",height:120}),(0,w.jsx)(i.Z,{direction:"row-reverse",children:(0,w.jsx)(l.Z,{color:"success",variant:"contained",disabled:!u,onClick:function(){u&&(n(u),v(""))},sx:{mt:2,color:"whitesmoke"},children:"\ub9ac\ubdf0 \ub0a8\uae30\uae30"})})]})]})}function g(e){var n=e.solutionId,t=(0,v.useQueryClient)(),r=(0,v.useMutation)((function(e){return p.Z.createReview(n,e)}),{onSuccess:function(e){console.log(e);var r=t.getQueryData(["solution",n]),i=new f.Z(r);i.pushReviews([].concat((0,u.Z)(r.reviews),[e])),t.setQueriesData(["solution",n],i)}}),i=r.isLoading,s=r.mutate;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(x,{handleSubmit:function(e){s(e)}}),i&&(0,w.jsx)(Z.Z,{})]})}function j(e){return(0,v.useQuery)(["solution",e],(function(){return p.Z.getSolution(e)}),{suspense:!0}).data}var m=t(64554),y=t(20890),k=t(13400),R=t(26347),b=t(64387),S=t(2094),C=t(97892),I=t.n(C),_=t(85941);function M(e){var n=e.review,t=e.editable,r=void 0!==t&&t,u=e.handleDelete,o=e.handleUpdate,d=(0,c.useState)(n.content),h=(0,s.Z)(d,2),v=h[0],f=h[1],p=(0,c.useState)(!1),Z=(0,s.Z)(p,2),x=Z[0],g=Z[1],j=(0,c.useState)(null),C=(0,s.Z)(j,2),_=C[0],M=C[1],z=Boolean(_),N=function(){M(null)},T=function(){g((function(e){return!e})),f(n.content),N()};return(0,w.jsx)(m.Z,{children:(0,w.jsxs)(i.Z,{children:[(0,w.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1,border:1,borderTopRightRadius:5,borderTopLeftRadius:5,borderColor:"rgba(59, 154, 225, 0.3)",backgroundColor:"rgba(59, 154, 225, 0.1)",height:"36px"},children:[(0,w.jsxs)(i.Z,{direction:"row",children:[(0,w.jsx)(y.Z,{fontWeight:800,sx:{mx:1},children:n.userName}),(0,w.jsxs)(y.Z,{color:"lightslategray",children:["commented ",I()(n.createdTime).fromNow()]})]}),r&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(k.Z,{onClick:function(e){M(e.currentTarget)},children:(0,w.jsx)(S.Z,{fontSize:"small"})}),(0,w.jsxs)(R.Z,{anchorEl:_,open:z,onClose:N,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,w.jsx)(b.Z,{onClick:T,children:(0,w.jsx)(y.Z,{fontSize:15,fontWeight:500,children:"\ud3b8\uc9d1\ud558\uae30"})}),(0,w.jsx)(b.Z,{onClick:function(){window.confirm("\ub9ac\ubdf0\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&u(n.id),N()},children:(0,w.jsx)(y.Z,{fontSize:15,fontWeight:500,color:"error.main",children:"\uc0ad\uc81c\ud558\uae30"})})]})]})]}),(0,w.jsx)(m.Z,{sx:{p:2,border:1,borderTop:0,borderBottomRightRadius:5,borderBottomLeftRadius:5,borderColor:"rgba(59, 154, 225, 0.3)"},children:x?(0,w.jsxs)(i.Z,{spacing:2,children:[(0,w.jsx)(a.ZP,{value:v,onChange:f,preview:"edit",height:120}),(0,w.jsxs)(i.Z,{direction:"row-reverse",spacing:1,children:[(0,w.jsx)(l.Z,{color:"success",disabled:v===n.content||!v,onClick:function(){v&&(o(n.id,v),T())},children:"\ub9ac\ubdf0 \uc5c5\ub370\uc774\ud2b8\ud558\uae30"}),(0,w.jsx)(l.Z,{color:"error",onClick:T,children:"\ucde8\uc18c\ud558\uae30"})]})]}):(0,w.jsx)(a.ZP.Markdown,{source:n.content})})]})})}function z(e){var n=e.solutionId,t=e.review,r=(0,_.aC)().userId,i=function(e){var n=(0,v.useQueryClient)();return(0,v.useMutation)((function(e){return p.Z.deleteReview(e)}),{onSuccess:function(t,r){var i=n.getQueryData(["solution",e]),u=new f.Z(i);u.pushReviews(i.reviews.filter((function(e){return e.id!==r}))),n.setQueryData(["solution",e],u)}}).mutate}(n),u=function(e){var n=(0,v.useQueryClient)();return(0,v.useMutation)((function(e){var n=e.reviewId,t=e.content;return p.Z.updateReview(n,t)}),{onSuccess:function(t){var r=n.getQueryData(["solution",e]),i=new f.Z(r);i.pushReviews(r.reviews.map((function(e){return e.id===t.id?t:e}))),n.setQueryData(["solution",e],i)}}).mutate}(n);return(0,w.jsx)(M,{review:t,editable:r===t.userId,handleDelete:function(e){i(e)},handleUpdate:function(e,n){u({reviewId:e,content:n})}})}function N(e){var n=e.solutionId,t=j(n);return(0,w.jsx)(i.Z,{spacing:2,children:t&&t.reviews.map((function(e){return(0,w.jsx)(z,{solutionId:n,review:e},e.id)}))})}var T=t(72466),Q=t(90388),D=t(54225),P=t(47360);function L(e){var n,t,r=e.solution,i=(0,D.Z)("code"),u=i.view,s=i.changeView;return(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(m.Z,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,w.jsxs)(T.Z,{value:u,exclusive:!0,onChange:s,size:"small",children:[(0,w.jsx)(Q.Z,{value:"code",children:(0,w.jsx)(y.Z,{px:1,fontWeight:800,children:"\ucf54\ub4dc"})}),(0,w.jsx)(Q.Z,{value:"review",children:(0,w.jsx)(y.Z,{px:1,fontWeight:800,children:"\ub9ac\ubdf0"})})]})}),"code"===u?(0,w.jsx)(P.Z,{value:null!==(n=null===r||void 0===r?void 0:r.code)&&void 0!==n?n:"",language:null!==(t=null===r||void 0===r?void 0:r.language)&&void 0!==t?t:"cpp",isMine:!1,handleChange:function(e){},handleSelect:function(e){}}):(0,w.jsx)(m.Z,{px:2,pb:2,children:(0,w.jsx)(a.ZP.Markdown,{source:null===r||void 0===r?void 0:r.readMe})})]})}function W(e){var n=e.solutionId,t=(0,_.aC)().userId,u=j(n),s=(0,r.s0)(),o=(0,v.useMutation)((function(){return p.Z.deleteSolution(n)}),{onSuccess:function(){s("./../../")}}),a=o.isLoading,c=o.mutate;return(0,w.jsxs)(i.Z,{spacing:1,children:[(0,w.jsx)(L,{solution:u}),(null===u||void 0===u?void 0:u.userId)===t&&(0,w.jsx)(i.Z,{direction:"row-reverse",spacing:1,children:(0,w.jsx)(l.Z,{color:"error",onClick:function(){window.confirm("\uae43\ud5c8\ube0c\uc5d0\uc11c\ub3c4 \ud480\uc774\uac00 \uc0ad\uc81c\ub429\ub2c8\ub2e4. \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&c()},children:"\uc0ad\uc81c\ud558\uae30"})}),a&&(0,w.jsx)(Z.Z,{})]})}function F(e){var n=e.solutionId;return(0,w.jsxs)(i.Z,{spacing:3,children:[(0,w.jsx)(W,{solutionId:n}),(0,w.jsx)(N,{solutionId:n}),(0,w.jsx)(g,{solutionId:n})]})}function H(){var e=(0,r.UO)().solutionId;return void 0===e?(0,w.jsx)(r.Fg,{to:"/notfound",replace:!0}):(0,w.jsx)(F,{solutionId:+e})}},7416:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(15671),i=t(43144),u=function(){function e(n){(0,r.Z)(this,e),this._id=void 0,this._code=void 0,this._readMe=void 0,this._date=void 0,this._userId=void 0,this._userName=void 0,this._language=void 0,this._reviews=void 0,this._id=n.id,this._code=n.code,this._readMe=n.readMe,this._date=n.date,this._userId=n.userId,this._userName=n.userName,this._language=n.language,this._reviews=[]}return(0,i.Z)(e,[{key:"pushReviews",value:function(e){return this._reviews=this._reviews.concat(e),this}},{key:"id",get:function(){return this._id}},{key:"code",get:function(){return this._code}},{key:"readMe",get:function(){return this._readMe}},{key:"date",get:function(){return this._date}},{key:"userId",get:function(){return this._userId}},{key:"userName",get:function(){return this._userName}},{key:"language",get:function(){return this._language}},{key:"reviews",get:function(){return this._reviews}}]),e}()},21598:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(74165),i=t(15861),u=t(15671),s=t(43144),o=t(7416),a=function(){function e(n,t){(0,u.Z)(this,e),this.solutionRepo=n,this.reviewRepo=t}return(0,s.Z)(e,[{key:"createSolution",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t,i,u){var s,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.solutionRepo.createSolution(n,t,i,u);case 2:return s=e.sent,a=new o.Z(s),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(n,t,r,i){return e.apply(this,arguments)}}()},{key:"getSolution",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t,i,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.solutionRepo.getSolution(n);case 2:return t=e.sent,i=new o.Z(t),e.next=6,this.reviewRepo.getReviews(i.id);case 6:return u=e.sent,i.pushReviews(u),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"updateSolution",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t,i,u){var s,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.solutionRepo.updateSolution(n,t,i,u);case 2:return s=e.sent,a=new o.Z(s),e.next=6,this.reviewRepo.getReviews(a.id);case 6:return c=e.sent,a.pushReviews(c),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(n,t,r,i){return e.apply(this,arguments)}}()},{key:"deleteSolution",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.solutionRepo.deleteSolution(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"createReview",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reviewRepo.createReview(n,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"updateReview",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reviewRepo.updateReview(n,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"deleteReview",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reviewRepo.deleteReview(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()}]),e}(),c=function(){function e(n){(0,u.Z)(this,e),this.useCase=n}return(0,s.Z)(e,[{key:"createSolution",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t,i,u){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.useCase.createSolution(n,t,i,u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n,t,r,i){return e.apply(this,arguments)}}()},{key:"getSolution",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.useCase.getSolution(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"updateSolution",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t,i,u){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.useCase.updateSolution(n,t,i,u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n,t,r,i){return e.apply(this,arguments)}}()},{key:"deleteSolution",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.useCase.deleteSolution(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"createReview",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.useCase.createReview(n,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"updateReview",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.useCase.updateReview(n,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"deleteReview",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.useCase.deleteReview(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()}]),e}(),l=(0,s.Z)((function e(n){(0,u.Z)(this,e),this.id=void 0,this.userId=void 0,this.userName=void 0,this.content=void 0,this.createdTime=void 0,this.updatedTime=void 0,this.id=n.id,this.userId=n.userId,this.userName=n.userName,this.content=n.content,this.createdTime=n.createdTime,this.updatedTime=n.updatedTime})),d=t(84608),h=function(){function e(){(0,u.Z)(this,e)}return(0,s.Z)(e,[{key:"getReviews",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.get("/review/".concat(n)).then((function(e){return e.data.map((function(e){return new l(e)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},{key:"createReview",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.post("/review",{solutionId:n,content:t}).then((function(e){var n=e.data;return new l(n)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"updateReview",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.put("/review/".concat(n),{content:t}).then((function(e){var n=e.data;return new l(n)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"deleteReview",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.deleteRequest("/review/".concat(n)).then((function(e){return 200===e.status}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}]),e}(),v=new c(new a(new(t(34559).Z),new h))},54225:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(29439),i=t(72791);function u(e){var n=(0,i.useState)(e),t=(0,r.Z)(n,2),u=t[0],s=t[1];return{view:u,changeView:function(e,n){null!==n&&s(n)}}}},2094:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),u=t(80184),s=(0,i.default)((0,u.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");n.Z=s},15776:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),u=t(80184),s=(0,i.default)((0,u.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 14v-2.47l6.88-6.88c.2-.2.51-.2.71 0l1.77 1.77c.2.2.2.51 0 .71L8.47 14H6zm12 0h-7.5l2-2H18v2z"}),"RateReview");n.Z=s}}]);
//# sourceMappingURL=879.ad3bb76d.chunk.js.map